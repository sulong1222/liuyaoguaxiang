<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>六爻在线解卦</title>
    <!-- 样式部分保持此前传统风格设计 -->
    <style>
        /* 保持之前的传统样式 */
        /* 新增解卦专用样式 */
        .interpretation {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
        .interpretation h3 {
            color: #d4af37;
            border-bottom: 1px solid #5a0000;
            padding-bottom: 5px;
        }
        .tab {
            cursor: pointer;
            padding: 10px 20px;
            background: #5a0000;
            display: inline-block;
            margin: 5px;
            border-radius: 5px;
        }
        .tab.active {
            background: #8b0000;
        }
        .advice-list {
            list-style: none;
            padding-left: 20px;
        }
        .advice-list li {
            margin: 10px 0;
            position: relative;
        }
        .advice-list li::before {
            content: "•";
            color: #8b0000;
            position: absolute;
            left: -15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <button onclick="generate()">🎴 诚心摇卦</button>
        <div id="result"></div>
    </div>

    <script>
        // 完整64卦数据（关键卦示例，完整版需补充）
const hexagramDict = {
  // 上经三十卦
  '111111': { name: '乾为天', desc: '元亨利贞。', yao: [
    '初九：潜龙，勿用。',
    '九二：见龙在田，利见大人。',
    '九三：君子终日乾乾，夕惕若，厉无咎。',
    '九四：或跃在渊，无咎。',
    '九五：飞龙在天，利见大人。',
    '上九：亢龙有悔。'
  ]},
  '000000': { name: '坤为地', desc: '君子以厚德载物。', yao: [
    '初六：履霜，坚冰至。',
    '六二：直方大，不习无不利。',
    '六三：含章可贞，或从王事，无成有终。',
    '六四：括囊，无咎无誉。',
    '六五：黄裳，元吉。',
    '上六：龙战于野，其血玄黄。'
  ]},
  '100010': { name: '水雷屯', desc: '刚柔始交而难生，动乎险中，大亨贞。' },
  '010001': { name: '山水蒙', desc: '山下出泉，蒙；君子以果行育德。' },
  '111010': { name: '水天需', desc: '云上于天，需；君子以饮食宴乐。' },
  '010111': { name: '天水讼', desc: '天与水违行，讼；君子以作事谋始。' },
  '010000': { name: '地水师', desc: '君子以容民畜众。' },
  '000010': { name: '水地比', desc: '地上有水，比；先王以建万国，亲诸侯。' },
  '111011': { name: '风天小畜', desc: '风行天上，小畜；君子以懿文德。' },
  '110111': { name: '天泽履', desc: '上天下泽，履；君子以辨上下，定民志。' },
  '111000': { name: '地天泰', desc: '天地交，泰；后以财成天地之道，辅相天地之宜，以左右民。' },
  '000111': { name: '天地否', desc: '天地不交，否；君子以俭德辟难，不可荣以禄。' },
  '101111': { name: '天火同人', desc: '天与火，同人；君子以类族辨物。' },
  '111101': { name: '火天大有', desc: '火在天上，大有；君子以遏恶扬善，顺天休命。' },
  '001000': { name: '地山谦', desc: '君子以裒多益寡，称物平施。' },
  '000100': { name: '雷地豫', desc: '雷出地奋，豫；先王以作乐崇德，殷荐之上帝，以配祖考。' },
  '110001': { name: '泽雷随', desc: '君子以向晦入宴息。' },
  '100011': { name: '山风蛊', desc: '君子以振民育德。' },
  '110000': { name: '地泽临', desc: '君子以教思无穷，容保民无疆。' },
  '000011': { name: '风地观', desc: '风行地上，观；先王以省方，观民设教。' },
  '100101': { name: '火雷噬嗑', desc: '雷电噬嗑；先王以明罚敕法。' },
  '101001': { name: '山火贲', desc: '君子以明庶政，无敢折狱。' },
  '000001': { name: '山地剥', desc: '山附于地，剥；上以厚下安宅。' },
  '100000': { name: '地雷复', desc: '雷在地中，复；先王以至日闭关，商旅不行。' },
  '100111': { name: '天雷无妄', desc: '天下雷行，物与无妄；先王以茂对时，育万物。' },
  '111001': { name: '山天大畜', desc: '天在山中，大畜；君子以多识前言往行，以畜其德。' },
  '100001': { name: '山雷颐', desc: '君子以慎言语，节饮食。' },
  '011110': { name: '泽风大过', desc: '君子以独立不惧，遁世无闷。' },
  '010010': { name: '坎为水', desc: '水洊至，习坎；君子以常德行，习教事。' },
  '101101': { name: '离为火', desc: '明两作，离；大人以继明照于四方。' },

  // 下经三十四卦
  '001110': { name: '泽山咸', desc: '君子以虚受人。' },
  '011100': { name: '雷风恒', desc: '君子以立不易方。' },
  '111110': { name: '天山遁', desc: '君子以远小人，不恶而严。' },
  '011111': { name: '雷天大壮', desc: '君子以非礼弗履。' },
  '000101': { name: '火地晋', desc: '君子以自昭明德。' },
  '101000': { name: '地火明夷', desc: '君子以莅众，用晦而明。' },
  '110101': { name: '风火家人', desc: '君子以言有物而行有恒。' },
  '101011': { name: '火泽睽', desc: '君子以同而异。' },
  '001010': { name: '水山蹇', desc: '君子以反身修德。' },
  '010100': { name: '雷水解', desc: '君子以赦过宥罪。' },
  '110001': { name: '山泽损', desc: '君子以惩忿窒欲。' },
  '100011': { name: '风雷益', desc: '君子以见善则迁，有过则改。' },
  '111110': { name: '泽天夬', desc: '君子以施禄及下，居德则忌。' },
  '011111': { name: '天风姤', desc: '后以施命诰四方。' },
  '000110': { name: '泽地萃', desc: '君子以除戎器，戒不虞。' },
  '011000': { name: '地风升', desc: '君子以顺德，积小以高大。' },
  '010110': { name: '泽水困', desc: '君子以致命遂志。' },
  '011010': { name: '水风井', desc: '君子以劳民劝相。' },
  '101110': { name: '泽火革', desc: '君子以治历明时。' },
  '011101': { name: '火风鼎', desc: '君子以正位凝命。' },
  '100100': { name: '震为雷', desc: '君子以恐惧修省。' },
  '001001': { name: '艮为山', desc: '君子以思不出其位。' },
  '001011': { name: '风山渐', desc: '君子以居贤德善俗。' },
  '110100': { name: '雷泽归妹', desc: '君子以永终知敝。' },
  '101100': { name: '雷火丰', desc: '君子以折狱致刑。' },
  '001101': { name: '火山旅', desc: '君子以明慎用刑而不留狱。' },
  '011001': { name: '巽为风', desc: '君子以申命行事。' },
  '100110': { name: '兑为泽', desc: '君子以朋友讲习。' },
  '011000': { name: '风水涣', desc: '先王以享于帝立庙。' },
  '000110': { name: '水泽节', desc: '君子以制数度，议德行。' },
  '110110': { name: '风泽中孚', desc: '君子以议狱缓死。' },
  '001001': { name: '雷山小过', desc: '君子以行过乎恭，丧过乎哀，用过乎俭。' },
  '101010': { name: '水火既济', desc: '君子以思患而豫防之。' },
  '010101': { name: '火水未济', desc: '君子以慎辨物居方。' }
};

        // 智能解卦规则库
        const interpretationRules = {
            movingYao: {
                0: '无动爻，事态稳定，保持现状即可。',
                1: '单爻动，关键因素变化，需重点关注对应领域。',
                2: '双爻动，事态复杂，需平衡多方关系。',
                3: '多爻动，变动剧烈，建议暂缓重大决策。'
            },
            elementAnalysis: {
                '111111': '纯阳之卦，主动创造，属金。',
                '000000': '纯阴之卦，主静承载，属土。',
                // 其他卦象五行属性...
            }
        };

        // 生成卦象逻辑（保持原有代码）
        // ...

        // 新增智能解卦功能
        function generateInterpretation(originalHex, changedHex, movingCount) {
            let advice = [];
            // 基础判断
            advice.push(`📜 卦象解读：${hexagramDict[originalHex].advice.overall}`);
            advice.push(`⚖️ 五行属性：${interpretationRules.elementAnalysis[originalHex] || '需结合具体卦象分析'}`);
            
            // 动爻数量判断
            const movingAdvice = interpretationRules.movingYao[Math.min(movingCount, 3)];
            advice.push(`🌀 动爻提示：${movingAdvice}`);

            // 变卦特殊提示
            if (changedHex && changedHex !== originalHex) {
                advice.push(`🌅 变卦启示：${hexagramDict[changedHex].advice.overall}`);
            }

            // 生成分类建议
            const categoryHtml = `
                <div class="interpretation">
                    <div class="tab active" onclick="switchTab('overall')">整体运势</div>
                    <div class="tab" onclick="switchTab('career')">事业决策</div>
                    <div class="tab" onclick="switchTab('love')">感情婚姻</div>
                    <div class="tab" onclick="switchTab('health')">健康养生</div>
                    
                    <div id="adviceContent">
                        <ul class="advice-list">
                            ${advice.map(item => `<li>${item}</li>`).join('')}
                            ${generateCategoryAdvice(originalHex, 'overall')}
                        </ul>
                    </div>
                </div>
            `;
            return categoryHtml;
        }

        // 分类建议生成
        function generateCategoryAdvice(hexKey, category) {
            const details = hexagramDict[hexKey].advice[category];
            return `<li><strong>${category}建议：</strong>${details}</li>`;
        }

        // Tab切换功能
        window.switchTab = function(category) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('adviceContent').innerHTML = `
                <ul class="advice-list">
                    ${generateCategoryAdvice(currentHex, category)}
                </ul>
   
